"use strict";angular.module("d3FunApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/circle",{templateUrl:"views/circle.html",controller:"CircleCtrl"}).when("/vegan",{templateUrl:"views/vegan.html",controller:"VeganCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("d3FunApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("d3FunApp").controller("CircleCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.charts=d3.range(10).map(function(){return d3.range(10).map(Math.random)})}]),angular.module("d3FunApp").directive("donutCharts",function(){return{template:"<div></div>",restrict:"E",link:function(a,b){b.text("this is the donutCharts directive")}}}),angular.module("d3FunApp").controller("VeganCtrl",["$scope","veganRestaurantRequester",function(a,b){a.restaurants=[],a.restaurantCount=0,a.loading=!0,a.fetchContent=function(){b.getData().then(function(b){a.restaurants=b.entries,a.restaurantCount=b.entries.length,a.loading=!1,console.log(a.restaurants)})},a.fetchContent()}]),angular.module("d3FunApp").factory("userLocator",["$q","$rootScope",function(a,b){return{getLocation:function(){var c=a.defer();return navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){console.log(a.coords.latitude),b.$apply(function(){c.resolve(a)})},function(){b.$apply(function(){c.reject("Unable to access location information")})}):b.$apply(function(){c.reject("Unable to access location information")}),c.promise}}}]),angular.module("d3FunApp").factory("veganRestaurantRequester",["userLocator","$q","$http",function(a,b,c){var d="http://www.vegguide.org/search/by-lat-long/";return{getData:function(){var e=b.defer();return a.getLocation().then(function(a){console.log("found location of"+a.coords),c.get(d+a.coords.latitude+","+a.coords.longitude).success(function(a){e.resolve(a),console.log("found restaurant data")}).error(function(){e.reject("error with http request!"),console.log("error with http request")})}),e.promise}}}]),angular.module("d3FunApp").directive("funchart",function(){return{restrict:"E",replace:!0,scope:{label:"@",min:"=",max:"=",value:"="},link:function(a,b){{var c=(a.value,d3.scale.category10(),b[0]),d=c.clientWidth,e=c.clientHeight;Math.min(d,e),d3.select(c).append("svg").style("color","yellow").style("background-color","#ffff99")}}}}),angular.module("d3FunApp").directive("placenode",function(){return{scope:{data:"=chartData"},restrict:"E",replace:!1,link:function(a){var b=function(a){return"1"==a?"#DDDDB9":"2"==a?"#1abc9c":"3"==a?"#2ecc71":"4"==a?"#16a085":"5"==a?"#27ae60":void 0};a.$watch("data",function(c){if(c.length>10){console.log("I see a data change!");var d=d3.select("#canvas-spot").append("svg").attr("width",800).attr("height",500);d.selectAll("circle").data(a.data).enter().append("circle").attr("cx",function(a){return 700*a.distance-100}).attr("cy",function(){return 200}).attr("r",function(a){return 12*a.veg_level}).style("fill",function(a){return b(a.veg_level)});{var e=d.selectAll("text").data(a.data).enter().append("text");e.attr("x",function(a){return 1e3*a.distance-100}).attr("y",300).style("color",function(a){return b(a.veg_level)}).text(function(a){return a.name}).attr("font-family","sans-serif").attr("font-size","10px")}}},!0)}}});